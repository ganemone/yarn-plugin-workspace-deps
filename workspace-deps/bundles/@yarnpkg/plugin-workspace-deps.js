/* eslint-disable */
module.exports = {
name: "@yarnpkg/plugin-workspace-deps",
factory: function (require) {
var plugin;plugin=(()=>{"use strict";var e={47:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});const o=require("@yarnpkg/fslib"),s=require("util"),a=require("fs"),i=(0,s.promisify)(a.writeFile),n=(0,s.promisify)(a.readFile),p=(0,s.promisify)(a.exists),d={hooks:{afterAllInstalled:async(e,t)=>{const{report:r}=t;await r.startTimerPromise("Generating workspace-deps.txt",async()=>{await Promise.all(e.workspaces.map(async r=>{let s=new Set;for(const[t,o]of r.dependencies)s.add(e.storedResolutions.get(o.descriptorHash));for(const t of s){const r=e.storedPackages.get(t);for(const[t,o]of r.dependencies)s.add(e.storedResolutions.get(o.descriptorHash))}const a="// @generated\n"+Array.from(s).map(t=>{const r=e.storedPackages.get(t);return`${r.scope?`@${r.scope}/${r.name}`:r.name}:${r.version}`}).sort().join("\n"),d=o.ppath.join(r.cwd,"workspace-deps.txt");if(t.immutable){if(!await p(d))throw new Error(`Need to create workspace-deps.txt file for ${r.cwd}, but --immutable flag was passed`);if(await n(d,"utf-8")!==a)throw new Error(`Workspace ${r.cwd} needs to update workspace-deps.txt file, but --immutable flag was passed`)}await i(d,a)}))})}}}}},t={};function r(o){if(t[o])return t[o].exports;var s=t[o]={exports:{}};return e[o](s,s.exports,r),s.exports}return r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(47)})();
return plugin;
}
};